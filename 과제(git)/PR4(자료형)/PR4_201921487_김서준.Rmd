---
title: "PR4 - R Factor, Matrix, List, Array"
author: "김서준"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---

# 1. Factor

## 1.1. 명목형 자료 만들기
```{R}
score <- factor(c(3, 2, 3, 4, 3, 1, 1, 3, 2, 2, 1, 1, 5),
                levels = c(1, 2, 3, 4),
                labels = c("A", "B", "C", "D"),
                ordered = T)
score
```

## 1.2. 명목형 자료로 변환하기

```{R}
#문자를 벡터에 입력하였을 때
fac_char <- c("포도", "키위", "메론", "바나나", "딸기") 
attributes(fac_char)
#문자벡터를 명목형 자료로 변경하였을 때
fac_char <- as.factor(fac_char)
attributes(fac_char)
#숫자를 벡터에 입력하며 명목형으로 변경도 가능
fac_num <- 1:4
attributes(fac_num)

fac_num <- as.factor(fac_num)
attributes(fac_num)
```

## 1.3. 팩터형 자료 빈도 파악
```{R}
table(score)

#빈도가 3 이상인 데이터만 출력
tb <- table(score)
tb[tb>3]
```

## 1.4. 서수형 자료와 명목형 자료의 차이
```{R}
score[1] > score[3] #(1)
fac_char[1] > fac_char[2] #(2)
#이곳에 주석으로 (1) 과 (2)의 차이를 서술하고 왜 그런 차이가 생기는지 각자 분석해보세요.
#(1)은 순서형 요인으로 값들 간 순서를 고려한 비교 가능, (2) 는 명목형 요인으로 순서를 고려하지 않아 순서를 고려한 비교가 불가능하다.
```

## 2. Matrix

## 2.1. matrix 생성
```{R}
mat <- matrix(1:8, nrow=2, ncol=4, byrow=T) #1~8 의 숫자로 2행 4 열의 행렬 생성, 가로(열)로 배열
dim(mat); length(mat) 

matrix(1:8, nrow=2, ncol=4, byrow=F)

matrix(1:8, nrow=2)
matrix(1:8, ncol=2)
matrix(1:8, ncol=4, byrow=T)
matrix(1:9, nrow=3, ncol=3,
       dimnames = (list(c("r1", "r2","r3"), c("c1", "c2", "c3"))))
```

## 2.2. matrix 각 차원에 이름 부여
```{R}
mat
rownames(mat)<-c("행 1","행 2")
colnames(mat)<-c("열 1","열 2","열 3","열 4")
mat
```

## 2.3. rbind() 와 cbind()를 사용한 매트릭스 생성
```{R}
x <- 2:4;x
y <- 9:11; y
cbind(x, y)
rbind(x, y)
```

## 2.4. rbind() 와 cbind()를 사용한 데이터 추가

```{R}
mat
cbind(mat,10:11)
rbind(mat, 20:23)
```

## 2.5. matrix 데이터 접근과 변환

```{R}
x <- 1:3 ;x
y <- 10:12 ; y
mat <- cbind(x, y) ; mat
mat[1,1] <- 100; mat
mat[2,] <- mat[2,] / 4 ; mat
mat[,2] <- mat[,2] - mat[,1] * 3 ; mat
```

# 3. List

## 3.1. 여러 벡터를 이용해 리스트 만들기
```{R}
str_vec <- c("korea", "USA", "Japan")
num_vec <- c(100, 200, 300, 400, 500)
mat <- matrix(2:9, 2, 4)
list_tot <- list(str_vec, num_vec, mat)
print(list_tot)

names(list_tot) <- c('str_vec', 'num_vec', 'mat')
print(list_tot)
```

## 3.2 list 함수 내에서 성분의 이름 지정하여 리스트 만들기
```{R}
list_tot2= list(seq = seq(1,10,2),
                str = c("토끼", "사자", "코끼리", "양"),
                plus = rep(c('고구마', '감자', '옥수수'),2))
print (list_tot2)
```

## 3.3. 데이터 속성을 화인하는 다양한 함수
```{R}
class (list_tot)
length(list_tot)
attributes (list_tot)
str(list_tot)
```

## 3.4. 리스트의 성분에 접근하기
```{R}
list_tot2 [1]
list_tot2 [3]
list_tot2 [1:2]
list_tot2$seq
list_tot2$str
```

## 3.5. 리스트의 성분안에 있는 원소에 접근하기
```{R}
list_tot[[3]][1]
list_tot2$seq[3]
list_tot2$str[1:2]
```

## 3.6.  리스트의 성분이나 원소 조작하기
```{R}
list_tot[1] <- NULL
str(list_tot)
list_tot2$str [1] <- "고양이"
str(list_tot2)
list_tot$NEW <- 2:5
str(list_tot)
```

## 3.7. 리스트의 성분에 하위 리스트 추가하여 계층적으로 리스트 만들기
```{R}
list_tot$hierarchy[[1]] <- list_tot2
str(list_tot)
```
# 4. Array

## 4.1. Array 생성하기
```{R}
arr <- array(1:18, dim=c(3,3,2),
dimnames=list(c("KOR","CHI","JAP"),
              c("GDP.R", "USD. R", "Cuur. Acc"),
              c("2011Y", "2012Y")))
arr

#벡터 생성후 차원을 부여하며 array 로 변환하기
arr1 <- 1:18
dim(arr1) <- c(3,3,2)
dimnames (arr1) <- list(c("KOR","CHI", "JAP"),
                        c("GDP.R", "USD. R", "Cuur. Acc"),
                        c("2011Y", "2012Y"))
arr1
arr1 == arr
```
## 4. Array 조작 방법

### 4.2.1. `[,,]` 인덱싱으로 각 원소에 접근하기
```{R}
arr
arr[1,,]#한국의 연도별 자료
arr[,-2,]
arr[,,2]#3개국의 2012 년자료
arr[,,"2012Y"] #이름으로 추출 (3 개국의 2012 년자료)
arr[c(T,T,F),,2] #한국, 중국의 2012년 자료 - 일본제외
arr[-2,,2] #한국, 일본의 2012년 자료
```

### 4.2.2. 배열 원소의 추출 및 수정
```{R}
arr.tmp <- arr
arr.tmp

arr.tmp[,,1] <- c(5,6,4)
arr.tmp

arr.tmp[,1,2] <- NA
arr.tmp

arr.tmp[is.na(arr.tmp)] <- c(8,1)
arr.tmp
```

# 5. 기타

## 5.1. NA 값 다루기
```{R}
x <- c(1, 2, NA, 4, NA, 5)
is.na(x)
bad <- is.na(x)
y <- x[!bad]
mean(y)
x <- c(1, 2, NA, 4, NA, 5)
good <- complete.cases(x)
x[good]
```

# PR4 연습문제

## 문제 1 
```{R}
#문제 1.1.
load('satellite.RData')
length(paper[paper==paper$위성영상])

# 문제 1.2.
paper[paper == paper$'&'] <- NULL
length(paper[paper==paper$'&'])

# 문제 1.3.
paper[19]
paper$방법론의[1] <- "방법론/NC"
paper$방법론의[2] <- "의/JC"
paper[19]
```

## 문제 2
```{R}
#원래 그래프
korean <- c(93, 78, 50, 90, 88, 87, 67, 59, 84)
math <- c(89, 80, 55, 86, 83, 90, 61, 63, 82)
student_class <- c(1, 2, 3, 1, 2, 2, 3, 2, 3)

library(ggplot2)
ggplot() + geom_point(aes(x=korean, y=math, colour=student_class))
print("student_class는 범주형 자료이며 factor 함수를 통해 생성해야 한다. 원래 그래프의 문제점은 첫 번째 코드는 student_class 변수를 요인(factor)으로 변환하지 않았다. 따라서 student_class 변수는 숫자형 벡터로 처리되고 student_class 변수를 벡터로 처리하기에 그래프의 색상은 학생 클래스별로 다른 색으로 설정되지 않는다.")

#수정된 그래프
korean <- c(93, 78, 50, 90, 88, 87, 67, 59, 84)
math <- c(89, 80, 55, 86, 83, 90, 61, 63, 82)
student_class <- factor(student_class,levels = c("1", "2", "3"))
library(ggplot2)
ggplot() + geom_point(aes(x=korean, y=math, colour=student_class))
```

## 도전문제